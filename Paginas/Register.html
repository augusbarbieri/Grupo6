<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro - Manadas</title>
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet">
  <link rel="stylesheet" href="../Assets/css/style.css">
</head>

<body>
<!-- HEADER con Navbar -->
<header class="mb-auto w-100 bg-primary text-white">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
      <!-- Logo + título -->
      <a class="navbar-brand d-flex align-items-center" href="login.html">
        <img src="../Assets/img/Logo.png" alt="Logo" class="site-logo me-2" style="height:50px;">
        <span>Manadas</span>
      </a>
    </div>
  </nav>
</header>

<!-- MAIN -->
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-5">

      <div class="card shadow">
        <div class="card-body p-4">
          <h3 class="text-center mb-4">Registro</h3>

          <div id="registerMessage" class="alert d-none" role="alert"></div>

          <form class="needs-validation" action="php/register.php" method="post" novalidate>
            <!-- Nombre -->
            <div class="mb-3">
              <label for="nombre" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Ingresá tu nombre" required autocomplete="given-name">
              <div class="invalid-feedback">Ingresá tu nombre.</div>
            </div>

            <!-- Apellido -->
            <div class="mb-3">
              <label for="apellido" class="form-label">Apellido</label>
              <input type="text" class="form-control" id="apellido" name="apellido" placeholder="Ingresá tu apellido" required autocomplete="family-name">
              <div class="invalid-feedback">Ingresá tu apellido.</div>
            </div>

            <!-- Email -->
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" name="email" placeholder="Ingresá tu correo" required autocomplete="email">
              <div class="invalid-feedback">Ingresá un email válido.</div>
            </div>

            <!-- Teléfono -->
            <div class="mb-3">
              <label for="telefono" class="form-label">Teléfono</label>
              <input type="tel" class="form-control" id="telefono" name="telefono" placeholder="Ingresá tu teléfono" required autocomplete="tel">
              <div class="invalid-feedback">Ingresá tu teléfono.</div>
            </div>

            <!-- Dirección -->
            <div class="mb-3">
              <label for="direccion" class="form-label">Dirección</label>
              <input type="text" class="form-control" id="direccion" name="direccion" placeholder="Ingresá tu dirección" required autocomplete="street-address">
              <div class="invalid-feedback">Ingresá tu dirección.</div>
            </div>

            <!-- Contraseña -->
            <div class="mb-3">
              <label for="password" class="form-label">Contraseña</label>
              <input type="password" class="form-control" id="password" name="password" placeholder="Ingresá tu contraseña" required autocomplete="new-password">
              <div class="invalid-feedback">Ingresá una contraseña.</div>
            </div>

            <!-- Confirmar contraseña -->
            <div class="mb-3">
              <label for="confirmar" class="form-label">Confirmar Contraseña</label>
              <input type="password" class="form-control" id="confirmar" name="confirmar_password" placeholder="Repetí tu contraseña" required autocomplete="new-password">
              <div class="invalid-feedback">Repetí tu contraseña.</div>
            </div>

            <!-- Botón -->
            <div class="d-flex flex-column align-items-center">
              <button type="submit" class="btn btn-primary w-100">Registrarme</button>
            </div>
          </form>

          <!-- Link a login -->
          <p class="text-center mt-3">
            ¿Ya tenés cuenta? <a href="login.html" class="fw-bold">Iniciar sesión</a>
          </p>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- FOOTER -->
<footer id="smartFooter" class="smart-footer">
  <p>
    <a href="https://www.instagram.com/la_cucha_de_chimuela" target="_self">
      Nuestras redes
    </a>
  </p>
</footer>

<!-- JS Footer inteligente -->
<script>
  const footer = document.getElementById('smartFooter');
  let hideTimeout;

  function showFooter() {
    footer.classList.add('show');
    clearTimeout(hideTimeout);
    hideTimeout = setTimeout(() => footer.classList.remove('show'), 2500);
  }

  window.addEventListener('mousemove', showFooter);
  window.addEventListener('scroll', showFooter);
  window.addEventListener('touchstart', showFooter);

  // Manejo de mensajes
  const params = new URLSearchParams(window.location.search);
  const messageBox = document.getElementById('registerMessage');
  if (params.has('success')) {
    messageBox.textContent = params.get('success');
    messageBox.classList.remove('d-none', 'alert-danger');
    messageBox.classList.add('alert-success');
  } else if (params.has('error')) {
    messageBox.textContent = params.get('error');
    messageBox.classList.remove('d-none', 'alert-success');
    messageBox.classList.add('alert-danger');
  }
  if (params.toString()) {
    window.history.replaceState({}, document.title, window.location.pathname);
  }

  // Validación de Bootstrap
  (() => {
    const forms = document.querySelectorAll('.needs-validation');
    Array.from(forms).forEach(form => {
      form.addEventListener('submit', event => {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  })();
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
